define("modules/clean/pagination_manager",["require","exports","tslib","modules/clean/ajax","modules/core/i18n","modules/core/notify"],function(e,t,r,o,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=(function(){function e(e){this.hasMoreItems=e}return e.prototype.areAllItemsReady=function(){return!this.hasMoreItems},e.prototype.invalidateHasMore=function(){this.hasMoreItems=!0},e.prototype.addDataToAjax=function(e){},e})(),l=(function(){function e(e){this.ajaxURL=e.ajaxURL,this.newDataCallback=e.newDataAvailableCallback,this.autoFetching=!1,this.mode=e.mode,this.keyName=e.keyName,this.items={},this.pages=[],this.nextRequestVoucher=e.firstPage.next_request_voucher,this.userID=e.userID,this.fqPathPrefix=e.fqPathPrefix?"/"+e.fqPathPrefix:"",this.addPage(e.firstPage.items)}return e.prototype.areAllItemsReady=function(){return this.mode.areAllItemsReady()},e.prototype.addPage=function(e){for(var t=[],r=[],o=0,a=e;o<a.length;o++){var l=a[o],s=l[this.keyName];if(null==s)return void i.Notify.warning(n._("Invalid server response"));null==this.items[s]&&(this.items[s]=l,r.push(l),t.push(s))}this.pages.push(t),this.newDataCallback(this,r)},e.prototype.startAutoFetching=function(){this.autoFetching=!0,this.fetchNext()},e.prototype.stopAutoFetching=function(){this.autoFetching=!1},e.prototype.reSync=function(e){void 0===e&&(e=!1),e&&(this.nextRequestVoucher=null,this.items={},this.pages=[]);var t=this.autoFetching&&this.mode.areAllItemsReady();this.mode.invalidateHasMore(),t&&this.startAutoFetching()},e.prototype.fetchNext=function(){var e=this;if(!this.mode.areAllItemsReady()){var t={};this.nextRequestVoucher&&(t.voucher=this.nextRequestVoucher),this.mode.addDataToAjax(t),o.WebRequest({url:this.ajaxURL,data:t,subject_user:this.userID,success:function(t){var r=JSON.parse(t);e.nextRequestVoucher=r.next_request_voucher,e.mode.hasMoreItems=r.has_more_items,e.autoFetching&&e.fetchNext();for(var o=0,n=r.items;o<n.length;o++){var i=n[o];i.fq_path=e.fqPathPrefix+i.fq_path}e.addPage(r.items)},error:function(){i.Notify.error(n._("There was a problem completing this request."))}})}},e.prototype.loadedPageCount=function(){return this.pages.length},e.prototype.getLoadedPage=function(e){var t=this,r=this.pages[e];return null==r?null:r.map(function(e){return t.items[e]})},e.prototype.getLastLoadedPage=function(){return this.getLoadedPage(this.loadedPageCount()-1)},e})();t.BasePaginationManager=l;var s=(function(e){function t(t){return e.call(this,r.__assign({},t,{mode:new a(t.firstPage.has_more_items)}))||this}return r.__extends(t,e),t.create=function(e){return new t(e)},t})(l);t.PaginationManager=s}),define("modules/clean/react/browse/util",["require","exports","modules/clean/react/browse/models","modules/core/i18n"],function(e,t,r,o){"use strict";function n(e,t){var n=e.count(),i=o._("You only have partial access");return n>0?1!==n||r.File.canViewFileMembers(e.first(),t)?o.ungettext("%(count)d item selected","%(count)d items selected",n).format({count:n}):r.File.isNoAccessSharedFolder(e.first())?o._("You don’t have access to this folder"):i:t&&!t.canViewContainingNSMembers?i:""}Object.defineProperty(t,"__esModule",{value:!0}),t.getSelectedFilesText=n}),define("modules/clean/react/file_viewer/async_controller",["require","exports"],function(e,t){"use strict";function r(){Array.from(document.querySelectorAll(i)).forEach(function(e){e.style.display&&e.setAttribute("data-preview-old-display",e.style.display),e.style.display="none"})}function o(){Array.from(document.querySelectorAll(i)).forEach(function(e){e.style.display=e.hasAttribute("data-preview-old-display")?e.getAttribute("data-preview-old-display"):""})}function n(t){var r=t.containerId,o=t.files,n=t.fileViewAction,i=t.fileViewOrigin,a=t.fileViewTarget,l=t.indexOfPreviewFile,s=t.onFileViewerDidMount,c=t.onFileViewerUnmount,d=t.shouldFocusComment,u=void 0!==d&&d,p=t.updateBrowserLocation,h=void 0===p||p,m=t.user;e(["modules/clean/react/file_viewer/controller"],function(e){e.open(o,l,m,r,{fileViewTarget:a,fileViewOrigin:i,fileViewAction:n,shouldFocusCommentInput:u,disableRouting:!h,onComponentDidMount:s,onComponentWillUnmount:c})})}Object.defineProperty(t,"__esModule",{value:!0});var i=[".maestro-chrome","#maestro-nav","#page-footer","#page-header","#page-sidebar","#browse-box",".growth-onboarding-progress-bar__container",".team-progress-bar-experience","#flash-upload-container"].join();t.hideElementsBehindFileViewer=r,t.showElementsBehindFileViewer=o,t.asyncOpenPreview=n}),define("modules/clean/react/files_view/constants",["require","exports","modules/clean/react/files_view/types","modules/core/i18n"],function(e,t,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PAGE_HEADER_HEIGHT=96,t.DEFAULT_COLUMN_HEADER_HEIGHT=40,t.DEFAULT_ROW_HEIGHT=72,t.DEFAULT_VIEWPORT_TOP_OFFSET=t.DEFAULT_PAGE_HEADER_HEIGHT+t.DEFAULT_COLUMN_HEADER_HEIGHT,t.COMPACT_PAGE_HEADER_HEIGHT=76,t.COMPACT_COLUMN_HEADER_HEIGHT=48,t.COMPACT_VIEWPORT_TOP_OFFSET=t.COMPACT_PAGE_HEADER_HEIGHT+t.COMPACT_COLUMN_HEADER_HEIGHT,t.PINNED_TEAM_FOLDER_SECONDARY_HEADER_PADDING_TOP=12,t.CHECKBOX_CELL_FLEX="0 0 36px",t.LIST_VIEW_COLUMN_FLEX={3:[t.CHECKBOX_CELL_FLEX,"1 1 50%","0 0 25%","0 0 25%"],2:[t.CHECKBOX_CELL_FLEX,"1 1 60%","0 0 40%"],1:[t.CHECKBOX_CELL_FLEX,"1 1 100%"]},t.LIST_VIEW_SEARCH_MODE_COLUMN_FLEX={2:[t.CHECKBOX_CELL_FLEX,"1 1 66%","0 0 34%"],1:[t.CHECKBOX_CELL_FLEX,"1 1 100%"]},t.GRID_VIEW_COLUMN_FLEX=[t.CHECKBOX_CELL_FLEX,"1 1"],t.LIST_VIEW_COLUMNS=[{sortField:r.SortField.FILENAME,label:o._("Name"),popoverTriggerLabel:o._("Name"),isLocked:!0},{sortField:r.SortField.MODIFIED,label:o._("Modified"),popoverTriggerLabel:o._("Modified")},{sortField:r.SortField.SHARED_WITH,label:o._("Members"),popoverTriggerLabel:o._("Members")},{sortField:r.SortField.CATEGORY,label:o._("Type"),popoverTriggerLabel:o._("Type")},{sortField:r.SortField.EXTENSION,label:o._("Extension"),popoverTriggerLabel:o._("Extension")},{sortField:r.SortField.SIZE,label:o._("Size"),popoverTriggerLabel:o._("Size")}],t.GRID_VIEW_COLUMNS=[{sortField:r.SortField.FILENAME,label:o._("Name"),popoverTriggerLabel:o._("Name")},{sortField:r.SortField.MODIFIED,label:o._("Modified"),popoverTriggerLabel:o._("Modified")},{sortField:r.SortField.CATEGORY,label:o._("Type"),popoverTriggerLabel:o._("Type")},{sortField:r.SortField.EXTENSION,label:o._("Extension"),popoverTriggerLabel:o._("Extension")},{sortField:r.SortField.SIZE,label:o._("Size"),popoverTriggerLabel:o._("Size")}],t.SEARCH_LIST_VIEW_COLUMNS=[{sortField:r.SortField.FILENAME,label:"",popoverTriggerLabel:"",isLocked:!0,isSortDisabled:!0},{sortField:r.SortField.MODIFIED,label:o._("Modified"),popoverTriggerLabel:o._("Modified"),isLocked:!0,isSortDisabled:!0}],t.SEARCH_LIST_VIEW_COLUMNS_DELETED=[{sortField:r.SortField.FILENAME,label:"",popoverTriggerLabel:"",isLocked:!0,isSortDisabled:!0},{sortField:r.SortField.MODIFIED,label:o._("Deleted"),popoverTriggerLabel:o._("Deleted"),isLocked:!0,isSortDisabled:!0}],t.FilesViewTileGridConstants={NUM_THRESHOLD_ROWS:10,SCROLL_DELTA_THRESHOLD:1},t.AllNewFolderCreationStates=[r.NewFolderCreationState.CREATE_FOLDER_INACTIVE,r.NewFolderCreationState.PENDING_INPUT,r.NewFolderCreationState.SAVING_INPUT],t.AllRenameStates=[r.RenameState.PENDING_INPUT,r.RenameState.SAVING_INPUT],t.AllViewTypes=[r.ViewType.Grid,r.ViewType.List],t.AllViewTypesExperiment=[r.ViewType.Grid,r.ViewType.LargeGrid,r.ViewType.List],t.ViewTypeLabels=(n={},n[r.ViewType.Grid]=o._("Grid"),n[r.ViewType.List]=o._("List"),n),t.ViewTypeLabelsExperiment=(i={},i[r.ViewType.Grid]=o._("Small"),i[r.ViewType.List]=o._("List"),i[r.ViewType.LargeGrid]=o._("Large"),i),t.AllDropTargetHighlightModes=[r.DropTargetHighlightMode.NONE,r.DropTargetHighlightMode.ALL_FOLDERS,r.DropTargetHighlightMode.NONSELECTED_FOLDERS,r.DropTargetHighlightMode.NONSELECTED_NONSHARED_FOLDERS,r.DropTargetHighlightMode.NONSELECTED_NONSHARED_NONTEAM_FOLDERS],t.AllSortFields=[r.SortField.FILENAME,r.SortField.MODIFIED,r.SortField.CATEGORY,r.SortField.EXTENSION,r.SortField.SIZE,r.SortField.SHARED_WITH,r.SortField.SYNC_SETTING,r.SortField.FILE_COUNTS],t.SortIsFilename=[r.SortField.FILENAME,r.SortField.CATEGORY,r.SortField.EXTENSION,r.SortField.SHARED_WITH,r.SortField.SYNC_SETTING],t.AllLoadingStates=[r.LoadingState.LOADED,r.LoadingState.LOADING_FIRST_PAGE,r.LoadingState.LOADING_REMAINING_PAGES],t.AllSortDirections=[r.SortDirection.ASCENDING,r.SortDirection.DESCENDING],t.ViewTypeThumbnailSizes=(a={},a[r.ViewType.Grid]=256,a[r.ViewType.LargeGrid]=512,a[r.ViewType.List]=32,a),t.ViewTypeGridSizes=(l={},l[r.ViewType.Grid]=160,l[r.ViewType.LargeGrid]=480,l[r.ViewType.List]=0,l);var n,i,a,l}),define("modules/clean/react/files_view/drag_and_drop",["require","exports","modules/clean/react/browse/models","modules/clean/react/no-jquery"],function(e,t,r,o){"use strict";function n(e,t,r,n,i,a,s){l.add(e,"dragenter",function(e){(t()||r())&&!o.closestElement(e.target,i)&&a()&&(s(null),n())})}function i(e){l.remove(e,"dragenter")}function a(e,t,o,n,i,a,l,s){if(t||o){if(e.is_dir&&!(n&&o)){if(i)return;var c=a.isCurrentPathWriteable()&&!r.File.isReadOnlySharedFolder(e);l(e),s({path:e.fq_path,hasPermissionToUploadToFolder:c})}else l(null),s()}}Object.defineProperty(t,"__esModule",{value:!0});var l=new o.ScopedEventHandlers(document);t.setupExternalDragHandler=n,t.cleanupExternalDragHandler=i,t.onFileDragEnterItem=a}),define("modules/clean/react/files_view/file_grouper",["require","exports","modules/core/i18n","modules/clean/datetime","modules/clean/react/browse/constants","modules/clean/react/files_view/types","modules/clean/react/browse/models"],function(e,t,r,o,n,i,a){"use strict";function l(e){return e instanceof a.File?a.File.getCategoryDescription(e,!0):n.ExtensionCategories.DOCUMENT}function s(e){return e instanceof a.File?e.is_dir?n.FileTypeCapitalizedCategoryTranslations.FOLDER:a.File.getExtension(e).toUpperCase():u}function c(e){return e instanceof a.File&&e.ts?1e3*e.ts:e instanceof a.Paper?Date.parse(e.last_modified_date):0}function d(e,t,n){var a=[],d=[],h=null;if(t===i.SortField.CATEGORY)e.forEach(function(e,t){if(e){var r=l(e);r!==h&&(a.push(r),d.push(t),h=r)}});else if(t===i.SortField.EXTENSION)e.forEach(function(e,t){if(e){var r=s(e);if(r!==h){var o=r;""===r&&(o=u),a.push(o),d.push(t),h=r}}});else if(t===i.SortField.MODIFIED)if(n===i.SortDirection.DESCENDING){var m=o.getTimeBands(Date.now());e.forEach(function(e,t){if(e){var o,n=c(e);o=n>=m.today?r._("Today"):n>=m.yesterday?r._("Yesterday"):n>=m.thisWeek?r._("This week"):n>=m.lastWeek?r._("Last week"):n>=m.thisMonth?r._("This month"):n>=m.lastMonth?r._("Last month"):n>=m.lastThreeMonths?r._("Three months ago"):r._("Older"),o!==h&&(a.push(o),d.push(t),h=o)}})}else e.forEach(function(e,t){if(e){var r;if(c(e)){var n=new Date(c(e)),i=n.getMonth(),l=n.getFullYear();r=o.month_with_year(i,l)}else r=p;r!==h&&(a.push(r),d.push(t),h=r)}});return{sectionLabels:a,sectionStartIndices:d}}Object.defineProperty(t,"__esModule",{value:!0});var u=r._("Extensionless",{comment:"Label for files without extensions like .txt or .png"}),p=r._("Missing dates",{comment:"label for group of files without dates marking when they are created or modified"});t.getSections=d}),define("modules/clean/react/files_view/file_jump",["require","exports","modules/clean/keycode","modules/core/dom"],function(e,t,r,o){"use strict";function n(e,t,n,l){var s=null!=e.which?e.which:e.keyCode,c=String.fromCharCode(s);s<r.KeyCode.SPACE||i.includes(c)||o.focus_in_input()||e.metaKey||e.altKey||e.altGraphKey||e.ctrlKey||s===r.KeyCode.SPACE&&!t()||(s===r.KeyCode.SPACE&&t()&&e.preventDefault(),n(c),null!=a&&clearTimeout(a),a=setTimeout(function(){l()},1e3))}Object.defineProperty(t,"__esModule",{value:!0});var i=["/","\\",":","?","*","<",">","|"],a=null;t.handleKeyPress=n}),define("modules/clean/react/files_view/file_list_empty_folder_table",["require","exports","tslib","external/react","spectrum/media_table","spectrum/table"],function(e,t,r,o,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.componentDidMount=function(){this.props.onTTI&&this.props.onTTI()},t.prototype._renderTitle=function(){return o.createElement("h3",{className:"u-font-strong empty-folder-table-title"},this.props.title)},t.prototype._renderSubtitle=function(){var e=this.props,t=e.subtitle,r=e.subtitleLink,n=e.subtitleOnClick;return t&&r?o.createElement("a",{className:"empty-folder-table-subtitle empty-folder-table-link",href:r,onClick:n},t):t?o.createElement("span",{className:"empty-folder-table-subtitle"},t):void 0},t.prototype.render=function(){for(var e=[],t=0;t<this.props.numRowsAbove;t++)e.push(o.createElement(n.MediaRow,{key:-t-1}));for(var r=[],a=Math.max(this.props.totalRows-this.props.numRowsAbove-1,0),t=0;t<a;t++)r.push(o.createElement(n.MediaRow,{key:t+1}));return o.createElement(i.Table,{className:"empty-folder-table"},o.createElement(i.TableHead,null),o.createElement(i.TableBody,null,e,o.createElement(n.MediaRow,{key:0},o.createElement(n.MediaCell,{className:"empty-folder-table-cell",title:this._renderTitle(),subtitle:this._renderSubtitle()})),r))},t.defaultProps={numRowsAbove:2,totalRows:14},t})(o.PureComponent);t.EmptyFolderTable=a}),define("modules/clean/react/files_view/file_list_utils",["require","exports","modules/clean/filetypes","modules/clean/react/files_view/types","modules/clean/react/browse/models","modules/clean/sharing/browse_exports"],function(e,t,r,o,n,i){"use strict";function a(e){var t=e.file,i=e.isSelected,a=e.dropTargetHighlightMode;if(a===o.DropTargetHighlightMode.NONE)return!1;if(!t.is_dir)return!1;if(n.File.isReadOnlySharedFolder(t))return!1;if(t.isDeleted)return!1;switch(a){case o.DropTargetHighlightMode.ALL_FOLDERS:return!0;case o.DropTargetHighlightMode.NONSELECTED_FOLDERS:return!i;case o.DropTargetHighlightMode.NONSELECTED_NONSHARED_FOLDERS:return!i&&t.type!==r.FileTypes.SHARED_FOLDER;case o.DropTargetHighlightMode.NONSELECTED_NONSHARED_NONTEAM_FOLDERS:return!i&&![r.FileTypes.SHARED_FOLDER,r.FileTypes.TEAM_SHARED_FOLDER].includes(t.type)}return!1}function l(e){var t=e.context,o=e.file;e.user;return o.isDeleted||o.is_dir&&i.shouldUsePublicFolderSharing(t.config,o.fq_path)||n.File.isTeamMemberFolder(o)||!n.File.canViewFileMembers(o,t)||o.type===r.FileTypes.SANDBOX}Object.defineProperty(t,"__esModule",{value:!0}),t.shouldFileBeHighlightedDropTarget=a,t.isSharingDisabledForFile=l}),define("modules/clean/react/files_view/keyboard_shortcuts",["require","exports","external/keymaster","external/react-dom","modules/clean/undo","modules/core/browser","modules/core/i18n","modules/core/notify","modules/clean/react/files_view/file_jump","modules/clean/react/no-jquery"],function(e,t,r,o,n,i,a,l,s,c){"use strict";function d(e){r.clearScope(e),r.setScope(E)}function u(e,t){return function(r){e(r)&&(r.preventDefault(),"function"==typeof t&&t(r))}}function p(e){return function(t){return!document.activeElement||document.activeElement===document.body||o.findDOMNode(e).contains(t.target)}}function h(e){d(e),S.remove(e,"keydown"),S.remove(e,"keyup")}function m(e){var t=e.getIsGlobalEvent,o=e.getIsItemEvent,s=e.getSelectedFiles,c=e.isFilesViewList,d=e.isCurrentPathWriteable,p=e.selectAllAction,h=e.deselectAllAction,m=e.onCopyToClipboard,g=e.onDelete,f=e.onPasteFromClipboard,_=e.onShowRename,S=e.onShowHelpMenu,v=e.scope;E=r.getScope(),E!==v&&r.setScope(v);var T=function(){var e=s(),t=e.some(function(e){return e.read_only});if(1===e.size)if(d()&&!t){var r=e.first();r.isDeleted?l.Notify.error(a._("Deleted files can’t be renamed.")):_(r)}else l.Notify.warning(a._("You don’t have permission to rename files in this folder."))},b=function(){var e=s();e.size&&g(e.toArray())},L=function(){n.performUndo()},w=function(){return document.getElementsByClassName("search-bar__text-input")[0].focus()};r("f2",v,u(o,T)),r("/",v,u(t,w)),r("shift+/",v,u(t,function(){return S(!!c)})),r("escape",v,u(t,h)),i.mac?(r("command+a",v,u(t,p)),r("command+c",v,u(o,m)),r("backspace",v,u(o,b)),r("command+v",v,u(t,f)),r("command+z",v,u(t,L))):(r("ctrl+a",v,u(t,p)),r("ctrl+c",v,u(o,m)),r("delete",v,u(o,b)),r("ctrl+v",v,u(t,f)),r("ctrl+z",v,u(t,L)))}function g(e){var t=e.getIsGlobalEvent,o=e.getIsItemEvent,n=e.getSelectedFiles,i=e.isCurrentPathWriteable,a=e.enableContextMenu,l=e.selectAllAction,s=e.deselectAllAction,d=e.onCopyToClipboard,p=e.onDelete,h=e.onNavigateToFileOrFolder,g=e.onNavigateToParentFolder,f=e.onPasteFromClipboard,_=e.onShowRename,E=e.onShowHelpMenu,S=e.openContextMenuAtPosition,v=e.scope;m({getIsGlobalEvent:t,getIsItemEvent:o,getSelectedFiles:n,isFilesViewList:!0,isCurrentPathWriteable:i,selectAllAction:l,deselectAllAction:s,onCopyToClipboard:d,onDelete:p,onPasteFromClipboard:f,onShowRename:_,onShowHelpMenu:E,scope:v});var T=function(){var e=n();1===e.size&&h(e.first())},b=function(){var e=n(),t=e.first();1===e.size&&t.is_dir&&h(t)},L=function(e){if("function"==typeof S&&n().size){var t=c.closestElement(e.target,".browse-file-row--is-selected");if(t){S(t.offsetLeft+200,t.offsetTop+5,t)}}else S(10,10)};r("enter",v,u(o,T)),r("right",v,u(o,b)),r("left",v,u(t,g)),a()&&r("alt+a",v,u(t,L))}function f(e){var t=e.scope,o=e.getIsFileJumping,n=e.onAddFileJumpKeyCode,i=e.onResetFileJump,a=function(e){r.getScope()===t&&s.handleKeyPress(e,o,n,i)};S.add(t,"keypress",a)}function _(e){S.remove(e,"keypress")}Object.defineProperty(t,"__esModule",{value:!0}),t.FILES_VIEW_SHORTCUTS=[{windowsKey:"Enter",macKey:"return",desc:a._("Open file or folder")},{key:"/",desc:a._("Search")},{windowsKey:"Ctrl + a",macKey:"⌘ + a",desc:a._("Select all files")},{windowsKey:"Esc",macKey:"esc",desc:a._("Deselect all files")},{windowsKey:"Ctrl + c",macKey:"⌘ + c",desc:a._("Copy selected file(s)")},{windowsKey:"Ctrl + v",macKey:"⌘ + v",desc:a._("Paste selected file(s) into the current folder")},{key:"F2",desc:a._("Rename selected file")},{windowsKey:"Delete",macKey:"delete",desc:a._("Delete selected file(s)")},{windowsKey:"Ctrl + z",macKey:"⌘ + z",desc:a._("Undo recent move/copy/rename/delete")},{key:"?",desc:a._("Show keyboard shortcuts")}],t.FILES_VIEW_LIST_SHORTCUTS=[{key:"↑",desc:a._("Select previous file (hold shift to select range)",{comment:"Shift refers to the shift key"})},{key:"↓",desc:a._("Select next file (hold shift to select range)",{comment:"Shift refers to the shift key"})},{key:"←",desc:a._("Go up a folder")},{key:"→",desc:a._("Open folder")}].concat(t.FILES_VIEW_SHORTCUTS),t.FILES_VIEW_TILE_GRID_SHORTCUTS=[{key:"↑",desc:a._("Select file in previous row (hold shift to select range)",{comment:"Shift refers to the shift key"})},{key:"↓",desc:a._("Select file in next row (hold shift to select range)",{comment:"Shift refers to the shift key"})},{key:"←",desc:a._("Select previous file (hold shift to select range)",{comment:"Shift refers to the shift key"})},{key:"→",desc:a._("Select next file (hold shift to select range)",{comment:"Shift refers to the shift key"})}].concat(t.FILES_VIEW_SHORTCUTS);var E="",S=new c.ScopedEventHandlers(document);t.generateGetIsGlobalEvent=p,t.resetFilesViewKeyboardShortcuts=h,t.setupFilesViewKeyboardShortcuts=m,t.setupFilesViewListKeyboardShortcuts=g,t.setupFileJumpKeyboardShortcuts=f,t.resetFileJumpKeyboardShortcuts=_}),define("modules/clean/react/files_view/name_input",["require","exports","tslib","external/classnames","external/react","modules/clean/keycode","modules/clean/react/files_view/types"],function(e,t,r,o,n,i,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=function(){},s=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.setInputRef=function(e){t.inputRef=e},t.handleDragStart=function(e){e.stopPropagation()},t.handleSubmit=function(e){e.preventDefault(),t.submitIfChanged(a.NameInputActionSource.SUBMIT)},t.handleKeyDown=function(e){e.keyCode===i.KeyCode.ESC?(e.preventDefault(),t.props.onCancel({source:a.NameInputActionSource.ESC})):e.keyCode===i.KeyCode.ENTER&&t.handleSubmit(e)},t.handleBlur=function(e){t.submitIfChanged(a.NameInputActionSource.BLUR)},t.handleClick=function(e){e.preventDefault(),t.props.onClick(e)},t}return r.__extends(t,e),t.prototype.componentDidMount=function(){var e=this;this.inputRef.focus(),window.requestAnimationFrame(function(){var t=e.inputRef.value,r=e.props.isDir?t.length:t.lastIndexOf(".");r<0&&(r=t.length),e.inputRef.setSelectionRange(0,r)})},t.prototype.submitIfChanged=function(e){var t=this.inputRef.value.trim();t===this.props.defaultValue?this.props.onCancel({source:e}):this.props.onSubmit(t)},t.prototype.render=function(){return n.createElement("form",{className:"u-pad-right-xs",onSubmit:this.handleSubmit},n.createElement("input",{ref:this.setInputRef,defaultValue:this.props.defaultValue,className:o("c-input",this.props.className),onBlur:this.handleBlur,onKeyDown:this.handleKeyDown,onDragStart:this.handleDragStart,"aria-label":this.props.label,onClick:this.handleClick}))},t.defaultProps={className:"",onCancel:l,onClick:l,onSubmit:l,idDir:null},t})(n.PureComponent);t.NameInput=s}),define("modules/clean/react/files_view/overflow_menu",["require","exports","tslib","external/react","spectrum/overflow_button","spectrum/popover","modules/core/i18n","external/lodash","modules/clean/react/browse/constants"],function(e,t,r,o,n,i,a,l,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c;(function(e){e[e.Normal=0]="Normal",e[e.Small=1]="Small"})(c=t.OverflowMenuSize||(t.OverflowMenuSize={}));var d=(function(e){function t(t){var r=e.call(this,t)||this;return r.onClick=function(e){e.preventDefault(),e.stopPropagation(),r.setPopoverContentPosition()},r.handleSelection=function(e){e.performAction()},r.setOverflowMenuRef=function(e){r.overflowMenuContent=e},r.state={popoverContentPosition:"below"},r}return r.__extends(t,e),t.prototype.renderOverflowButton=function(){return o.createElement(n.OverflowButton,{"aria-label":a._("More actions"),className:"browse-overflow-menu-trigger-button",tagName:"span",size:this.props.size===c.Small?"small":"default",variant:this.props.showBorders?"secondary":"borderless"})},t.prototype.setPopoverContentPosition=function(){var e=this.overflowMenuContent.getElementsByClassName("browse-overflow-menu-trigger-button")[0],t=s.OverflowMenuConstants.MENU_ITEM_HEIGHT_PX*this.props.actionItemsGroups[0].length+2*s.OverflowMenuConstants.MENU_MARGIN_PX;this.props.actionItemsGroups.length>1&&(t+=s.OverflowMenuConstants.MENU_ITEM_HEIGHT_PX*this.props.actionItemsGroups[1].length+s.OverflowMenuConstants.MENU_POPOVER_ITEM_GROUP_SEPARATOR_HEIGHT_PX);var r=e.getBoundingClientRect();r.top>t+s.CulledListConstants.DEFAULT_HEADER_HEIGHT_PX&&r.bottom+t>window.innerHeight?this.setState({popoverContentPosition:"above"}):this.setState({popoverContentPosition:"below"})},t.prototype._getMenuItems=function(){var e=this.props.actionItemsGroups;return l.reduce(e,function(e,t,r){var n=t.map(function(e){return o.createElement(i.PopoverContentItem,{className:e.className,key:e.label,value:e,disabled:e.disabled},e.label)});return r?e.concat([o.createElement(i.PopoverItemGroupSeparator,{key:r})],n):n.slice()},[])},t.prototype.render=function(){var e=this.props.attachment,t=this._getMenuItems();return o.createElement("div",{className:"browse-overflow-menu",onClick:this.onClick,onDoubleClick:this.onClick,ref:this.setOverflowMenuRef},o.createElement(i.Popover,{onSelection:this.handleSelection,closeOnSelection:!0},o.createElement(i.PopoverTrigger,{className:"browse-overflow-menu-trigger"},this.renderOverflowButton()),o.createElement(i.PopoverContent,{attachment:e,position:this.state.popoverContentPosition,className:"browse-overflow-menu-content"},t)))},t.defaultProps={attachment:"right"},t})(o.PureComponent);t.FilesViewOverflowMenu=d}),define("modules/clean/react/files_view/overflow_menu_with_star",["require","exports","tslib","external/react","modules/clean/react/files_view/overflow_menu"],function(e,t,r,o,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=(function(e){function t(t){var r=e.call(this,t)||this;return r.state=r.getStateFromProps(),r}return r.__extends(t,e),t.prototype.componentWillReceiveProps=function(e){this.props.canDisplayFolderSizes===e.canDisplayFolderSizes&&this.props.starredLoadingState===e.starredLoadingState||this.setState(this.getStateFromProps(e))},t.prototype.getStateFromProps=function(e){void 0===e&&(e=this.props);var t=e.file,r=e.canDisplayFolderSizes;return{actionItems:(0,e.getOverflowMenuActions)(t,!!r)}},t.prototype.render=function(){var e=this.props,t=e.file,r=e.attachment,i=e.showBorders,a=e.size,l=this.state.actionItems;return o.createElement(n.FilesViewOverflowMenu,{file:t,attachment:r,actionItemsGroups:[l],size:a,showBorders:i})},t})(o.PureComponent);t.OverflowMenuWithStar=i}),define("modules/clean/react/files_view/star",["require","exports","external/react","modules/core/exception"],function(e,t,r,o){"use strict";function n(t){var n,i,a=t.item,l=t.user,s=t.className,c=t.onStarClick,d=t.isReadOnly,u=t.isTabbing,p=e("modules/clean/react/starred/browse_exports"),h=p.Star,m=p.HOME_RESOURCE_ID_TYPE,g=p.StarredSource;return a.file_id?(n=a.file_id,i=m.ENCODED_FILE_OBJ_ID):a.pad_id?(n=a.pad_id,i=m.PAPER_DOCUMENT_ID):a.folder_id?(n=a.folder_id,i=m.PAPER_FOLDER_ID):(o.assert(!!a.fq_path,"Starrable item is not valid. It requires file_id, pad_id, folder_id or fq_path."),n=a.fq_path,i=m.FQ_PATH),r.createElement("div",{className:s},r.createElement(h,{id:n,key:"star",idType:i,user:l,onStarClick:c,source:g.BROWSE,isReadOnly:d,isTabbing:u}))}Object.defineProperty(t,"__esModule",{value:!0}),t.StarContainer=n}),define("modules/clean/react/files_view/tile_grid",["require","exports","tslib","external/classnames","external/immutable","external/react","spectrum/button","modules/clean/em_string","modules/clean/filepath","modules/core/browser","modules/clean/react/files_view/file_grouper","modules/clean/react/files_view/file_list_utils","modules/clean/react/files_view/keyboard_shortcuts","modules/clean/react/browse/models","modules/clean/react/files_view/overflow_menu","modules/clean/react/files_view/overflow_menu_with_star","modules/clean/react/files_view/tile_label_input","modules/clean/react/files_view/types","modules/clean/react/files_view/constants","modules/clean/react/files_view/drag_and_drop","modules/clean/react/files_view/util","modules/clean/react/selectable_list","modules/clean/react/files_view/star","modules/clean/react/maestro/tile_grid","modules/clean/react/title_bubble","modules/core/i18n","modules/core/uri","modules/clean/browse_interface"],function(e,t,r,o,n,i,a,l,s,c,d,u,p,h,m,g,f,_,E,S,v,T,b,L,w,D,I,y){"use strict";function N(e,t){var r;return e.thumbnail_url_tmpl&&(r=I.URI.parse(e.thumbnail_url_tmpl),r=r.removeQuery("size").removeQuery("size_mode"),r=r.updateQuery({size:t+"x"+t,size_mode:"2"}).toString()),r}Object.defineProperty(t,"__esModule",{value:!0}),t.getThumbnailUrlForItem=N;var C=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onStarClickCallback=function(e){var r=t.props,o=r.onStarClick,n=r.item,i=n;o&&o(i,e)},t}return r.__extends(t,e),t.prototype.render=function(){var e,t=this.props,r=t.fileRename,o=t.arePostTTIModulesLoaded,n=t.user,a=t.item,c=t.inSelectMode,d=t.createRenameCancelHandler,u=t.createRenameSubmitHandler,p=t.expShowPaperStars,m=a instanceof h.File,g=a,E=a;if(e=m?s.filename(g.fq_path):E.title,m&&r&&s.paths_are_equal(r.file.fq_path,g.fq_path)){if(r.state===_.RenameState.PENDING_INPUT)return i.createElement(f.TileLabelInput,{defaultValue:e,label:e,onCancel:d(g),onSubmit:u(g)});if(r.state===_.RenameState.SAVING_INPUT)return i.createElement(L.TileItemLabelText,{className:"tile-label__text--saving",label:D._("Renaming…")})}var S=l.Emstring.em_snippet(e,14,.5),v=o&&!c&&!h.File.isNoAccessSharedFolder(g),T=i.createElement(L.TileItemLabelText,{key:"label",label:S});e!==S&&(T=i.createElement(w.TitleBubble,{content:e,position:w.TitleBubble.POSITIONS.BOTTOM,className:"tile-label__title-bubble",key:"tooltip"},T));var I=m?this.onStarClickCallback:void 0,y=m||p?i.createElement(b.StarContainer,{item:a,user:n,className:"tile-star",key:"tileStar",onStarClick:I}):null;return i.createElement("span",null,[T,v&&!r&&y])},t})(i.PureComponent);t.TileLabel=C;var F=(function(t){function l(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={inSelectMode:!1,sectionLabels:n.List(),sectionStartIndices:n.List(),selectedIds:n.Set(),totalNumItems:0},e.handleFileViewerUnmount=function(){e.tileGrid&&e.tileGrid.getAndUpdateTileLayout();var t=e.props.selectedFiles.first();t&&e.props.onFocusFile(t.fq_path)},e.createRenameCancelHandler=function(t){return function(){e.props.onRenameCancel(t)}},e.createRenameSubmitHandler=function(t){return function(r){e.props.onRenameSubmit(t,r)}},e.setTileGridRef=function(t){e.tileGrid=t},e.hrefForItem=function(e,t){return t instanceof h.File?y.href_for_file(e,t):t.url},e.getTileItem=function(t,o){var n,l=e.props,c=l.activeDropTarget,d=l.isCreateFolderUIActive,u=l.isPhotosPage,p=l.items,m=l.selection,g=l.user,f=l.viewType,_=e.state.inSelectMode;if(d){if(0===t)return e.getCreateFolderTile();t-=1}var S=p.get(t);if(!S){var v="Placeholder "+t;return{altText:v,id:v,isViewOnly:!0,isDraggable:!1,isSelectable:!1}}var T=S instanceof h.File,b=S,L=S,w=e.createViewFileHandler(b),I=e.createToggleSelectHandler(b),y=w,C=!1,F=!1;T&&(n=e.renderTileOverflowMenu(b,o)),_&&T&&(C=m.selected.last()===b.fq_path,F=m.selected.has(b.fq_path),y=I,T&&(n=i.createElement(a.Button,{className:"tile__action-button--view-file",variant:"secondary",size:"small","aria-label":D._("View File"),onClick:w})));var O=u?void 0:e.renderLabelElement(S),P=T?s.filename(b.fq_path):L.title,R=T?N(b,E.ViewTypeThumbnailSizes[f]):void 0,M=S===c,A=e.hrefForItem(g,S),H={file:b,paper:S instanceof h.Paper?L:void 0,id:T?b.fq_path:L.pad_id,labelNode:O,altText:P,thumbnailUrl:R,actionNode:n,onTileAction:y,isDraggable:!1,isFocused:C,isSelectable:T,handleToggleSelect:I,checkboxAriaText:D._("Select tile"),href:A};return u||(H=r.__assign({},H,{isDraggable:!0,onDragEnter:e.createDragEnterHandler(b,F,M),onDragStart:e.createDragStartHandler(b,F,I)})),H},e.shouldFileBeHighlightedDropTarget=function(t,r){var o=e.props.dropTargetHighlightMode;return u.shouldFileBeHighlightedDropTarget({file:t,isSelected:r,dropTargetHighlightMode:o})},e}return r.__extends(l,t),l.prototype.componentWillMount=function(){this.setState({inSelectMode:this.props.selectedFiles.count()>0}),this.setTotalNumItems(this.props),this.setTileItemsSections(this.props),this.setSelectedTiles(this.props)},l.prototype.componentDidMount=function(){this.setupExternalDragHandler(),this.setupKeyboardShortcuts()},l.prototype.componentWillUnmount=function(){this.props.isPhotosPage||p.resetFileJumpKeyboardShortcuts(T.SELECTABLE_TILE_GRID_KEY_SCOPE),p.resetFilesViewKeyboardShortcuts(T.SELECTABLE_TILE_GRID_KEY_SCOPE),S.cleanupExternalDragHandler(T.SELECTABLE_TILE_GRID_KEY_SCOPE)},l.prototype.componentWillReceiveProps=function(e){e.items===this.props.items&&e.createNewFolderState===this.props.createNewFolderState||this.setTotalNumItems(e),e.selectedFiles!==this.props.selectedFiles&&(this.setSelectedTiles(e),this.setState({inSelectMode:e.selectedFiles.count()>0})),e.activeSortField===this.props.activeSortField&&e.activeSortDirection===this.props.activeSortDirection&&e.sections===this.props.sections&&e.items===this.props.items||this.setTileItemsSections(e)},l.prototype.componentDidUpdate=function(e){(e.createNewFolderState===_.NewFolderCreationState.PENDING_INPUT&&this.props.createNewFolderState===_.NewFolderCreationState.SAVING_INPUT||e.fileRename!==this.props.fileRename||e.items!==this.props.items||e.starredState!==this.props.starredState)&&this.tileGrid.forceUpdate()},l.prototype.setTotalNumItems=function(e){var t=Math.max(e.items.size,e.totalNumItems);e.isCreateFolderUIActive&&(t+=1),this.setState({totalNumItems:t})},l.prototype.setTileItemsSections=function(e){var t
;t=e.sections?e.sections:e.activeSortField?d.getSections(e.items,e.activeSortField,e.activeSortDirection):{sectionLabels:[],sectionStartIndices:[]},this.setState({sectionLabels:n.List(t.sectionLabels),sectionStartIndices:n.List(t.sectionStartIndices)})},l.prototype.createToggleSelectHandler=function(e){var t=this,r=e.fq_path;return function(e){e.preventDefault(),e.stopPropagation();var o=t.props.selection;o=o.selected.has(r)?o.update("selected",function(e){return e.delete(r)}):o.update("selected",function(e){return e.add(r)}).set("anchor",r),t.props.onSelectionChange(o)}},l.prototype.renderTileOverflowMenu=function(t,r){var o=this.props,n=o.getOverflowMenuActions,a=o.arePostTTIModulesLoaded,l=o.starredState,s=0===r?"left":"right";if(a){var c=void 0;if(l){c=l[e("modules/clean/react/starred/browse_exports").HOME_RESOURCE_ID_TYPE.ENCODED_FILE_OBJ_ID+":"+t.file_id]}return i.createElement(g.OverflowMenuWithStar,{file:t,getOverflowMenuActions:n,attachment:s,size:m.OverflowMenuSize.Small,showBorders:!0,starredLoadingState:c})}return null},l.prototype.renderLabelElement=function(e){var t=this.state.inSelectMode,o=this.props,n=o.user,a=o.fileRename,l=o.arePostTTIModulesLoaded,s=o.onStarClick,c=o.expShowPaperStars,d={user:n,fileRename:a,arePostTTIModulesLoaded:l,onStarClick:s,expShowPaperStars:c};return i.createElement(C,r.__assign({},d,{item:e,inSelectMode:t,createRenameCancelHandler:this.createRenameCancelHandler,createRenameSubmitHandler:this.createRenameSubmitHandler}))},l.prototype.createViewFileHandler=function(e){var t=this;return function(r){if(r.preventDefault(),r.stopPropagation(),"click"===r.type){var o=r;if(0===o.button){var n=t.hrefForItem(t.props.user,e);if(v.hasModifierKey(o))return void c.open_tab(n)}}e instanceof h.File?t.props.onNavigateToFileOrFolder(e,t.handleFileViewerUnmount):e instanceof h.Paper&&t.props.onOpenPaper(e)}},l.prototype.setSelectedTiles=function(e){var t=n.Set().withMutations(function(t){e.selectedFiles.forEach(function(e){t.add(e.fq_path)})});this.setState({selectedIds:t})},l.prototype.setupExternalDragHandler=function(){var e=this,t=function(){return!!e.props.isDraggingInternalFiles},r=function(){return!!e.props.isDraggingExternalFiles},o=function(){return e.props.activeDropTarget};S.setupExternalDragHandler(T.SELECTABLE_TILE_GRID_KEY_SCOPE,t,r,this.props.onSetFileUploaderPath,".tile",o,this.props.onSetDropTarget)},l.prototype.setupKeyboardShortcuts=function(){var e=this,t=this.props,r=t.onDelete,o=t.onShowRename,n=t.deselectAll,i=t.getIsCurrentPathWriteable,a=t.getIsFileJumping,l=t.onAddFileJumpKeyCode,s=t.onResetFileJump,c=t.onCopyToClipboard,d=t.onPasteFromClipboard,u=t.selectAll,h=p.generateGetIsGlobalEvent(this),m=h,g=function(){return e.props.selectedFiles};this.props.isPhotosPage||p.setupFileJumpKeyboardShortcuts({scope:T.SELECTABLE_TILE_GRID_KEY_SCOPE,getIsFileJumping:a,onAddFileJumpKeyCode:l,onResetFileJump:s}),p.setupFilesViewKeyboardShortcuts({getIsGlobalEvent:h,getIsItemEvent:m,getSelectedFiles:g,isFilesViewList:!1,isCurrentPathWriteable:i,selectAllAction:u,deselectAllAction:n,onCopyToClipboard:c,onDelete:r,onPasteFromClipboard:d,onShowRename:o,scope:T.SELECTABLE_TILE_GRID_KEY_SCOPE,onShowHelpMenu:function(){return e.props.onOpenKeyboardShortcutModal()}})},l.prototype.createDragEnterHandler=function(e,t,r){var o=this;return function(n){o.props.onDragEnter(n,e,t,r)}},l.prototype.createDragStartHandler=function(e,t,r){var o=this;return function(n){t?o.props.onDragStart(n):(r(n),o.props.onDragStart(n,[e]))}},l.prototype.getCreateFolderTile=function(){var e=this.props,t=e.createNewFolderState,r=e.onNewFolderCancel,o=e.onNewFolderSubmit,n=D._("New folder"),a=i.createElement("div",null);return t===_.NewFolderCreationState.PENDING_INPUT?(n=D._("Folder name"),a=i.createElement(f.TileLabelInput,{label:n,onCancel:r,onSubmit:o})):t===_.NewFolderCreationState.SAVING_INPUT&&(n=D._("Creating new folder…"),a=i.createElement(L.TileItemLabelText,{className:"tile-label__text--saving",label:n})),{altText:n,id:"New folder tile",isDraggable:!1,isSelectable:!1,labelNode:a}},l.prototype.getTileGridRef=function(){return this.tileGrid},l.prototype.render=function(){var e=this.props,t=e.enableMaxHeightGrouping,r=e.viewType,n=o({"file-tile-grid-container":!0,"file-tile-grid-container--show-checkboxes":this.state.inSelectMode});return i.createElement("div",null,i.createElement(L.InfiniteTileGrid,{key:"tileGrid",ref:this.setTileGridRef,totalNumItems:this.state.totalNumItems,containerClass:n,rowClass:"file-tile-row",enableMaxHeightGrouping:t,delayRenderFullTile:!this.props.isCreateFolderUIActive,logTileLoading:!0,numThresholdRows:E.FilesViewTileGridConstants.NUM_THRESHOLD_ROWS,scrollDeltaThreshold:E.FilesViewTileGridConstants.SCROLL_DELTA_THRESHOLD,sectionStartIndices:this.state.sectionStartIndices,sectionLabels:this.state.sectionLabels,showLabels:!this.props.isPhotosPage,contentOffset:136,getTileItem:this.getTileItem,selectedIds:this.state.selectedIds,handleTTI:this.props.onTTI,thumbStore:this.props.thumbStore,onRangeInView:this.props.onRangeInView,tilesPerRow:this.props.tilesPerRow,onTilesPerRowChange:this.props.onTilesPerRowChange,activeDropTarget:this.props.activeDropTarget,maxTileWidth:E.ViewTypeGridSizes[r],tileHeight:E.ViewTypeGridSizes[r],shouldFileBeHighlightedDropTarget:this.shouldFileBeHighlightedDropTarget}))},l.defaultProps={enableMaxHeightGrouping:!1},l})(i.PureComponent);t.FilesViewTileGrid=F}),define("modules/clean/react/files_view/tile_label_input",["require","exports","external/classnames","external/react","modules/clean/react/files_view/name_input"],function(e,t,r,o,n){"use strict";function i(e){var t=r("tile-label-input",e.className),i=e.defaultValue||"",a=function(e){e.stopPropagation(),e.preventDefault()};return o.createElement(n.NameInput,{className:t,defaultValue:i,label:e.label,onCancel:e.onCancel,onClick:a,onSubmit:e.onSubmit})}Object.defineProperty(t,"__esModule",{value:!0}),t.TileLabelInput=i}),define("modules/clean/react/files_view/types",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});(function(e){e.ESC="ESC",e.SUBMIT="SUBMIT",e.BLUR="BLUR"})(t.NameInputActionSource||(t.NameInputActionSource={}));(function(e){e.CREATE_FOLDER_INACTIVE="CREATE_FOLDER_INACTIVE",e.PENDING_INPUT="PENDING_INPUT",e.SAVING_INPUT="SAVING_INPUT"})(t.NewFolderCreationState||(t.NewFolderCreationState={}));(function(e){e.PENDING_INPUT="pending-input",e.SAVING_INPUT="saving-input"})(t.RenameState||(t.RenameState={}));(function(e){e.LOADED="LOADED",e.LOADING_FIRST_PAGE="LOADING_FIRST_PAGE",e.LOADING_REMAINING_PAGES="LOADING_REMAINING_PAGES"})(t.LoadingState||(t.LoadingState={}));(function(e){e.FILENAME="FILENAME",e.MODIFIED="MODIFIED",e.CATEGORY="CATEGORY",e.EXTENSION="EXTENSION",e.SIZE="SIZE",e.SHARED_WITH="SHARED_WITH",e.SYNC_SETTING="SYNC_SETTING",e.FILE_COUNTS="FILE_COUNTS"})(t.SortField||(t.SortField={}));(function(e){e.FILENAME="FILES_BY_NAME",e.MODIFIED="FILES_BY_MODIFIED",e.CATEGORY="FILES_BY_CATEGORY",e.EXTENSION="FILES_BY_NAME",e.SIZE="FILES_BY_SIZE",e.SHARED_WITH="FILES_BY_NAME",e.SYNC_SETTING="FILES_BY_SYNC_SETTING",e.FILE_COUNTS="FILES_BY_FILE_COUNTS"})(t.SortLabel||(t.SortLabel={}));(function(e){e.ASCENDING="ASCENDING",e.DESCENDING="DESCENDING"})(t.SortDirection||(t.SortDirection={}));(function(e){e.Grid="GRID_VIEW",e.List="LIST_VIEW",e.LargeGrid="LARGE_GRID_VIEW"})(t.ViewType||(t.ViewType={}));(function(e){e.LOADING="LOADING",e.COMPLETE="COMPLETE",e.NO_ACCESS="NO_ACCESS",e.ERROR="ERROR"})(t.FetchFolderSizeState||(t.FetchFolderSizeState={}));(function(e){e.NONE="NONE",e.ALL_FOLDERS="ALL_FOLDERS",e.NONSELECTED_FOLDERS="NONSELECTED_FOLDERS",e.NONSELECTED_NONSHARED_FOLDERS="NONSELECTED_NONSHARED_FOLDERS",e.NONSELECTED_NONSHARED_NONTEAM_FOLDERS="NONSELECTED_NONSHARED_NONTEAM_FOLDERS"})(t.DropTargetHighlightMode||(t.DropTargetHighlightMode={}))}),define("modules/clean/react/files_view/util",["require","exports"],function(e,t){"use strict";function r(e){return 0===e.button&&!o(e)}function o(e){return e.altKey||e.ctrlKey||e.metaKey}Object.defineProperty(t,"__esModule",{value:!0}),t.shouldHandleClick=r,t.hasModifierKey=o}),define("modules/clean/react/maestro/tile_grid",["require","exports","tslib","external/react","external/react-dom","external/classnames","modules/clean/js_client_stopwatch","spectrum/culled_list","modules/clean/react/maestro/tile_element","modules/clean/react/maestro/tile_grid_logger"],function(e,t,r,o,n,i,a,l,s,c){"use strict";function d(e){var t=null;return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];if(!t||t.length!==r.length||!t.every(function(e,t){return e===r[t]}))return t=r,e.apply(void 0,r)}}function u(e){var t=e.className,r=e.label;return t=i("tile-label__text",t),o.createElement("div",{className:t},r)}Object.defineProperty(t,"__esModule",{value:!0});t.memoizeCallback=d,t.TileItemLabelText=u;var p=(function(e){function t(t){var r=e.call(this,t)||this;if(r.ttiReported=!1,r.itemRangeByRow=[],r.scrollTileIntoView=function(e,t){var o=r.props.contentOffset||0,n=document.documentElement.scrollTop||document.body.scrollTop,i=Math.floor(t/r.props.tilesPerRow),a=e-o,l=r.getRowHeight(),s=i*l,c=s+l;n<=s&&c<=a+n||(s<n?window.scrollTo(0,s):window.scrollTo(0,c-a))},r.updateOnResize=function(){window.requestAnimationFrame(function(){r.getAndUpdateTileLayout()})},r.handleTTI=function(){r.ttiReported=!0;var e=r.props.handleTTI;e&&e()},r.setLastViewedPage=function(e){var t=document.documentElement.scrollTop||document.body.scrollTop,o=Math.round(t/e);if(r.tileLoadLogger.pruneTrackedPages(),r.tileLoadLogger.logCompletedPages(),!r.tileLoadLogger.pagesCompletedLogging.has(o)&&!r.tileLoadLogger.pagesToLog.has(o))if(o!==r.tileLoadLogger.lastViewedPage){if(r.tileLoadLogger.lastViewedPage=o,r.tileLoadLogger.pageChangeTime=r.tileLoadLogger.getTimeNow(),!r.tileLoadLogger.startTimeByPage.get(o)){var n=r.tileLoadLogger.getTimeNow(),i=r.tileLoadLogger.startTimeByPage.set(o,n);r.tileLoadLogger.startTimeByPage=i}}else{var n=r.tileLoadLogger.getTimeNow();if(n-r.tileLoadLogger.pageChangeTime>1e3){var a=r.tileLoadLogger.pagesToLog.add(o);r.tileLoadLogger.pagesToLog=a}}},r.logTileError=function(e){r.tileLoadLogger&&r.tileLoadLogger.recordTileError(e),r.props.logTileLoading&&c.InfiniteTileGridLogger.logThumbLoadError()},r.logTileLoaded=function(e,t,o){r.tileLoadLogger&&r.tileLoadLogger.recordTileLoaded(e,t,o)},r.renderTileElement=function(e,t,n){if(e<0||e>r.props.totalNumItems)return null;var i=r.props.getTileItem(e,n);if(!i)return o.createElement(s.TilePlaceholder,{leftOffset:t,tileHeight:r.state.tileWidth,tileWidth:r.state.tileWidth});var a=r.ttiReported&&r.props.delayRenderFullTile,l=i.isSelectable&&!!r.props.selectedIds&&r.props.selectedIds.has(i.id),c=i.file&&r.props.shouldFileBeHighlightedDropTarget(i.file,l),d=c&&i.file===r.props.activeDropTarget;return o.createElement(s.TileElement,{file:i.file,paper:i.paper,key:i.id,onTileAction:i.onTileAction,width:r.state.tileWidth,leftOffset:t,tileIndex:e,labelHeight:i.labelNode?r.props.labelHeight:0,delayRenderFullTile:a,actionNode:i.actionNode,thumbnailUrl:i.thumbnailUrl,labelNode:i.labelNode,altText:i.altText,onThumbnailError:r.props.logTileLoading?r.logTileError:void 0,onThumbnailLoad:r.props.logTileLoading?r.logTileLoaded:void 0,isDraggable:i.isDraggable,onDragEnter:i.onDragEnter,onDragStart:i.onDragStart,isFocused:i.isFocused,isSelectable:i.isSelectable,isSelected:l,isViewOnly:i.isViewOnly,isActiveDropTarget:d,isAvailableDropTarget:c,handleToggleSelect:i.handleToggleSelect,checkboxAriaText:i.checkboxAriaText,thumbStore:r.props.thumbStore,scrollTileIntoView:r.scrollTileIntoView,href:i.href})},r.renderRow=function(e,t,n){var i=r.rowHeights?r.rowHeights[t]:r.getRowHeight();if(!e)return o.createElement(l.CulledItem,{className:r.props.rowClass,height:i,key:t,tagName:"li",topOffset:n});if(!Array.isArray(e))return o.createElement(l.CulledItem,{className:r.props.rowClass,height:i,key:t,tagName:"li",topOffset:n},e);for(var a=e,s=a[0],c=a[1],d=r.state.tileWidth+r.props.tilePadding,u=[],p=4,h=s;h<c;h++)u.push(r.renderTileElement(h,p,u.length)),p+=d;return o.createElement(l.CulledItem,{className:r.props.rowClass,height:i,key:t,tagName:"li",topOffset:n},u)},r.handleRangeInView=d(function(e,t){var o=r.props.onRangeInView;if(o){var n=r.translateRowRangeToItemRange(e,t);o(n[0],n[1])}}),r.props.sectionLabels||r.props.sectionStartIndices){if(!r.props.sectionLabels||!r.props.sectionStartIndices)throw new Error("Included only one of `sectionLabels` or `sectionStartIndices`.");if(r.props.sectionLabels.count()!==r.props.sectionStartIndices.count())throw new Error("sectionLabels and sectionStartIndices must be of same length.")}return r.state={tileWidth:r.props.maxTileWidth},a.JSStopwatch.create_stopwatch_if_not_exist("infinite_tile_grid_logging"),r}return r.__extends(t,e),t.prototype.updateLayout=function(){var e=this;this.animationFrameRequestId=window.requestAnimationFrame(function(){var t=e.getAndUpdateTileLayout();e.props.logTileLoading&&!e.tileLoadLogger&&e.setupTileLogging(e.getRowHeight(),t.tilesPerRow)})},t.prototype.componentDidMount=function(){window.addEventListener("resize",this.updateOnResize),this.updateLayout()},t.prototype.componentWillReceiveProps=function(e){this.tileLoadLogger&&this.tileLoadLogger.updateNumTiles(e.totalNumItems),this.props.maxTileWidth!==e.maxTileWidth&&this.updateLayout()},t.prototype.componentWillUnmount=function(){window.removeEventListener("resize",this.updateOnResize),this.animationFrameRequestId&&window.cancelAnimationFrame(this.animationFrameRequestId),this.tileLoadLogger&&(clearInterval(this.logTrackingInterval),delete this.tileLoadLogger)},t.prototype.getRowHeight=function(){var e=this.state.tileWidth+this.props.tilePadding;return this.props.showLabels&&(e+=this.props.labelHeight+4),e},t.prototype.getPageHeight=function(){var e=document.documentElement.clientHeight||window.outerHeight,t=this.props.contentOffset||0,r=e-t,o=this.getRowHeight(),n=o*Math.ceil(r/o);return Math.max(n,o)},t.prototype.getAndUpdateTileLayout=function(){var e=this.props.maxTileWidth+this.props.tilePadding,t=n.findDOMNode(this);if(!t||0===t.clientWidth)return{tileWidth:this.state.tileWidth,tilesPerRow:this.props.tilesPerRow};var r=t.clientWidth,o=Math.max(1,Math.floor(r/e)),i=this.props.maxTileWidth;return r%e>1&&(o++,i=r/o-this.props.tilePadding),this.state.tileWidth!==i&&this.setState({tileWidth:i}),this.props.tilesPerRow!==o&&this.props.onTilesPerRowChange(o),{tileWidth:i,tilesPerRow:o}},t.prototype.setupTileLogging=function(e,t){var r=this.getPageHeight(),o=t*Math.ceil(r/e);this.tileLoadLogger=new c.InfiniteTileGridLogger(this.props.totalNumItems,o,t,this.handleTTI);var n=this.tileLoadLogger.pagesToLog.add(0);this.tileLoadLogger.pagesToLog=n;var i=this.tileLoadLogger.getTimeNow(),a=this.tileLoadLogger.startTimeByPage.set(0,i);this.tileLoadLogger.startTimeByPage=a,this.logTrackingInterval=setInterval(this.setLastViewedPage,200,r)},t.prototype.translateRowRangeToItemRange=function(e,t){var r=this.itemRangeByRow;return[r[e][0],r[t][1]]},t.prototype.render=function(){var e=this,t=this.itemRangeByRow;t.length=0;var r=[],n=this.getRowHeight(),i=this.props,a=i.containerClass,s=i.enableMaxHeightGrouping,c=i.numThresholdRows,d=i.scrollDeltaThreshold,u=i.sectionStartIndices,p=i.sectionLabels,h=i.totalNumItems;if(u&&u.count()>0)return this.rowHeights=[],u.forEach(function(i,a){var l=h;a!==u.count()-1&&(l=u.get(a+1)),e.rowHeights.push(32);var s=l-i,c=Math.ceil(s/e.props.tilesPerRow),d=p.get(a),m=o.createElement("div",{className:"tile-section-header"},d);r.push(m),t.push([i,i]);for(var g=0;g<c;g++){var f=i+g*e.props.tilesPerRow,_=Math.min(f+e.props.tilesPerRow,l),E=[f,_];r.push(E),t.push(E),e.rowHeights.push(n)}}),o.createElement(l.CulledList,{enableMaxHeightGrouping:s,items:r,listItemHeight:this.rowHeights,itemBuffer:c,className:a,renderRow:this.renderRow,scrollThreshold:d,shouldUseWindowAsScrollContainer:!0,onRangeInView:this.handleRangeInView});for(var m=Math.ceil(h/this.props.tilesPerRow),g=0;g<m;g++){var f=g*this.props.tilesPerRow,_=Math.min(f+this.props.tilesPerRow,h),E=[f,_];r.push(E),t.push(E)}return o.createElement(l.CulledList,{enableMaxHeightGrouping:s,items:r,listItemHeight:n,itemBuffer:c,className:a,renderRow:this.renderRow,scrollThreshold:d,shouldUseWindowAsScrollContainer:!0,onRangeInView:this.handleRangeInView})},t.defaultProps={enableMaxHeightGrouping:!1,numThresholdRows:10,tilePadding:16,tileHeight:160,maxTileWidth:160,labelHeight:40,logTileLoading:!1,scrollDeltaThreshold:1,showLabels:!0,getTileItem:function(e,t){return null},handleTTI:function(){}},t})(o.PureComponent);t.InfiniteTileGrid=p}),define("modules/clean/react/outside_event",["require","exports","tslib","external/react","external/prop-types","external/lodash","modules/clean/react/util"],function(e,t,r,o,n,i,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=o.createElement,s=function(e,t,s,c){var d=null!=e.displayName?e.displayName:"UnnamedComponent";return u=(function(o){function n(){var e=null!==o&&o.apply(this,arguments)||this;return e._handleOutsideEvent=function(t){return"function"==typeof e.props[c]?e.props[c](t):void 0},e._handleInsideEvent=function(t){return t.stopPropagation(),"function"==typeof t.nativeEvent.stopImmediatePropagation&&t.nativeEvent.stopImmediatePropagation(),"function"==typeof e.props[s]?e.props[s](t):void 0},e}return r.__extends(n,o),n.prototype.componentDidMount=function(){return document.addEventListener(t,this._handleOutsideEvent,!1)},n.prototype.componentWillUnmount=function(){return document.removeEventListener(t,this._handleOutsideEvent,!1)},n.prototype.render=function(){return l(e,a.mergeProps(i.omit(this.props,s,c,"children"),(t={},t[s]=this._handleInsideEvent,t)),this.props.children);var t},n})(o.Component),u.displayName="Outside"+t+"Handled"+d,u.propTypes=(p={},p[s]=n.func,p[c]=n.func,p),u;var u,p};t.addOutsideEventHandling=s;var c=s("div","click","onClick","onOutsideClick");t.OutsideClickHandler=c;var d=s("div","mousedown","onMouseDown","onOutsideMouseDown");t.OutsideMouseDownHandler=d}),define("modules/clean/react/path_breadcrumbs",["require","exports","tslib","external/classnames","external/react","spectrum/icon_arrow","spectrum/icon_content","spectrum/popover","modules/clean/em_string","modules/clean/filepath","modules/core/i18n","modules/clean/user_education/react/user_education_effect","modules/clean/user_education/user_education_client","modules/clean/react/icon/icon_helper"],function(e,t,r,o,n,i,a,l,s,c,d,u,p,h){"use strict";function m(e,t){return 20-(t?2.625:new s.Emstring(e).length)}function g(e,t,r){for(var o=e.split("/").filter(Boolean),n=[{path:"",icon:"folder_dropbox-small",folderName:t,alt:r}],i=h.spectrum_folder_icon({size:h.ICON_SIZES.SMALL}),a=0;a<o.length;a++)e="/"+o.slice(0,a+1).join("/"),n.push({path:e,folderName:c.filename(e),icon:i,alt:d._("Folder")});if(n.length<3)return{dropdownCrumbs:[],inlineCrumbs:n,root:n[0]};for(var l=n[0]&&n[0].folderName||"",u=m(l,!1),p=n.map(function(e){return new s.Emstring(e.folderName||"").length}),g=1,f=p[n.length-1],a=n.length-2;a>=1&&(f+=1.64,f+=p[a],!(f>u));a--)g+=1;n.length===g+1&&(g+=1);var _=n.length-g;return{dropdownCrumbs:n.slice(0,_),inlineCrumbs:n.slice(_),root:n[0]}}function f(e){switch(e){case _.LARGE:return"right";case _.SMALL:return"right-small"}}Object.defineProperty(t,"__esModule",{value:!0});t.generateBreadcrumbData=g;var _;(function(e){e.LARGE="LARGE",e.SMALL="SMALL"})(_=t.PathBreadcrumbsSize||(t.PathBreadcrumbsSize={}));var E=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.render=function(){var e=this.props.path,t=this.props,i=t.firstBreadcrumbName,a=t.firstBreadcrumbAlt,l=t.isDraggingInternalFiles,s=t.shouldHighlightDropTargets,p=t.setFileUploaderPath,h=t.getUrlForPath,f=t.setUrl,E=t.size,v=t.disableDragging,b=g(e,i,a),L=b.dropdownCrumbs,w=b.inlineCrumbs,D=b.root,I=m(D&&D.folderName||"",L.length>0),y=o({"brws-path-breadrumbs":!0,"brws-path-breadrumbs--small":this.props.size===_.SMALL}),N="page-header-text u-l-fl";return w.length>1||L.length>0?n.createElement("span",{className:y},n.createElement("h1",{className:"ax-visually-hidden"},c.filename(e)),n.createElement("nav",{className:N,id:"path-breadcrumbs","aria-label":d._("Folder hierarchy"),role:"navigation"},L.length>0&&n.createElement(T,{crumbs:L,currentPath:e,isDraggingInternalFiles:l,shouldHighlightDropTargets:s,setFileUploaderPath:p,setUrl:f,size:E,disableDragging:v}),w.map(function(t,o){return n.createElement(S,r.__assign({},t,{key:encodeURI(t.path),isOnlyCrumb:0===o&&1===w.length&&0===L.length,index:o,isLastCrumb:o===w.length-1,maxWidth:I,currentPath:e,isDraggingInternalFiles:l,isHighlightedDropTarget:s,setFileUploaderPath:p,getUrlForPath:h,setUrl:f,size:E,disableDragging:v}))}))):n.createElement("span",{className:y},n.createElement("h1",{className:N},n.createElement(u.UserEducationEffect,{containerName:"PathBreadcrumbs",name:"HomeTitle",useSpan:!0},i)))},t.defaultProps={path:"/",isDraggingInternalFiles:!1,shouldHighlightDropTargets:!1,setFileUploaderPath:function(){},size:_.LARGE,disableDragging:!1},t})(n.PureComponent);t.PathBreadcrumbs=E;var S=(function(e){function t(t){var r=e.call(this,t)||this;return r.onDragEnterBreadcrumb=function(e){e.preventDefault(),e.target!==r.lastEnteredElement&&(r.props.disableDragging||(r.lastEnteredElement=e.target,r.dragEnterCount+=1,r.setState({isDraggedOver:!0}),r.props.isLastCrumb||r.props.setFileUploaderPath({path:r.props.path})))},r.onDragLeaveBreadcrumb=function(e){e.preventDefault(),r.props.disableDragging||(r.lastEnteredElement=null,r.dragEnterCount-=1,r.dragEnterCount<1&&(r.dragEnterCount=0,r.state.isDraggedOver&&(r.props.setFileUploaderPath({path:r.props.currentPath}),r.setState({isDraggedOver:!1}))))},r.onDropBreadcrumb=function(){r.setState({isDraggedOver:!1})},r.onDragOverBreadcrumb=function(e){e.preventDefault(),e.stopPropagation()},r.handleMouseEnter=function(){r.props.isDraggingInternalFiles&&r.setState({isDraggedOver:!0})},r.handleMouseLeave=function(){r.state.isDraggedOver&&r.setState({isDraggedOver:!1})},r.handleMouseUp=function(){r.state.isDraggedOver&&r.setState({isDraggedOver:!1})},r.navigateToFolder=function(e){var t=r.props.path;p.UEClient.sendEvent("BreadCrumbSegment","linkClicked",{path:t}),e.preventDefault(),r.props.setUrl({path:t})},r.eventHandlers={onDragEnter:r.onDragEnterBreadcrumb,onDragLeave:r.onDragLeaveBreadcrumb,onDrop:r.onDropBreadcrumb,onDragOver:r.onDragOverBreadcrumb,onMouseEnter:r.handleMouseEnter,onMouseLeave:r.handleMouseLeave,onMouseUp:r.handleMouseUp},r.state={isDraggedOver:!1},r}return r.__extends(t,e),t.prototype.componentDidMount=function(){this.dragEnterCount=0,this.lastEnteredElement=null},t.prototype.render=function(){var e=this.props,t=e.getUrlForPath,a=e.path,l=e.index,c=e.isOnlyCrumb,d=e.maxWidth,p=e.isLastCrumb,h=e.isHighlightedDropTarget,m=e.size,g=c?this.props.folderName:s.Emstring.em_snippet(this.props.folderName,d),_={"breadcrumb-segment":!0,"breadcrumb-segment--is-drop-target":!p&&h,"breadcrumb-segment--file-dragged-over":!p&&this.state.isDraggedOver},E=f(m);return p?n.createElement("span",r.__assign({},this.eventHandlers),g):n.createElement("span",r.__assign({className:"breadcrumb-segment__wrapper"},this.eventHandlers),n.createElement(u.UserEducationEffect,{containerName:"BreadCrumbSegment",name:"link-"+l,useSpan:!0},n.createElement("a",{href:t(a).toString(),onClick:this.navigateToFolder,className:o(_)},g)),n.createElement(i.IconArrow,{name:E}))},t.defaultProps={isOnlyCrumb:!1,isDraggingInternalFiles:!1,isHighlightedDropTarget:!1,disableDragging:!1},t})(n.Component),v=(function(e){function t(t){var r=e.call(this,t)||this;return r.onDragEnter=function(e){e.preventDefault(),e.target!==r.lastEnteredElement&&(r.props.disableDragging||(r.lastEnteredElement=e.target,r.dragEnterCount+=1,r.setState({isDraggedOver:!0}),r.props.setFileUploaderPath({path:r.props.path})))},r.onDragLeave=function(e){e.preventDefault(),r.props.disableDragging||(r.lastEnteredElement=null,r.dragEnterCount-=1,r.dragEnterCount<1&&(r.dragEnterCount=0,r.state.isDraggedOver&&(r.props.setFileUploaderPath({path:r.props.currentPath}),r.setState({isDraggedOver:!1}))))},r.onDrop=function(e){r.setState({isDraggedOver:!1}),r.dragEnterCount=0,r.props.closeFunc()},r.onDragOver=function(e){e.preventDefault(),e.stopPropagation()},r.handleMouseEnter=function(){r.props.isDraggingInternalFiles&&r.setState({isDraggedOver:!0})},r.handleMouseLeave=function(){r.state.isDraggedOver&&(r.setState({isDraggedOver:!1}),r.props.closeFunc())},r.handleMouseUp=function(){r.state.isDraggedOver&&r.setState({isDraggedOver:!1}),r.props.isDraggingInternalFiles&&!r.props.isLastCrumb&&r.props.closeFunc()},r.state={isDraggedOver:!1},r}return r.__extends(t,e),t.prototype.componentDidMount=function(){this.dragEnterCount=0,this.lastEnteredElement=null},t.prototype.render=function(){var e=this.props,t=e.icon,i=e.alt,s=e.folderName,c={"breadcrumb-menu-item":!0,"breadcrumb-menu-item--is-drop-target":this.props.isHighlightedDropTarget,"breadcrumb-menu-item--file-dragged-over":this.state.isDraggedOver},d=n.createElement("span",{title:s,className:"breadcrumb-menu-item-wrapper"},n.createElement("span",{className:"breadcrumb-menu-item-icon"},n.createElement(a.IconContent,{name:t,alt:i})),n.createElement("span",{className:"breadcrumb-menu-item-text"},s));return n.createElement(l.PopoverContentItem,r.__assign({value:this.props.path,className:o(c)},{onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave,onDrop:this.onDrop,onDragOver:this.onDragOver,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onMouseUp:this.handleMouseUp}),d)},t.defaultProps={isHighlightedDropTarget:!1,closeFunc:function(){},alt:"",isDraggingInternalFiles:!1,disableDragging:!1},t})(n.Component),T=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={menuVisible:!1},t.onDragEnter=function(e){t.props.disableDragging||(e.preventDefault(),t.setState({menuVisible:!0}))},t.onInnerDragEnter=function(e){e.preventDefault(),t.dragEnterCount++},t.onDragLeave=function(e){e.preventDefault(),t.dragEnterCount--,t.dragEnterCount<1&&(t.dragEnterCount=0,t.state.menuVisible&&t.setState({menuVisible:!1}))},t.onMouseEnter=function(e){t.props.disableDragging||t.props.isDraggingInternalFiles&&!t.props.disableDragging&&(e.preventDefault(),t.setState({menuVisible:!0}))},t.onCrumbSelected=function(e){t.props.setUrl({path:e})},t.onPopoverToggle=function(e){var r=e.isOpen;t.setState({menuVisible:r})},t.onClose=function(){t.dragEnterCount=0,t.onPopoverToggle({isOpen:!1})},t}return r.__extends(t,e),t.prototype.componentDidMount=function(){this.dragEnterCount=0},t.prototype.render=function(){var e=this,t=this.props.crumbs.slice().reverse(),r=this.props,o=r.currentPath,s=r.shouldHighlightDropTargets,c=r.isDraggingInternalFiles,u=r.setFileUploaderPath,p=r.size,h=r.disableDragging,m=d._("Show parent folders (descending)"),g=n.createElement(a.IconContent,{name:"folder_dropdown-small",alt:m,className:"breadcrumb-menu-icon"}),_=f(p);return n.createElement(l.Popover,{onSelection:this.onCrumbSelected,onMenuToggle:this.onPopoverToggle,className:"breadcrumb-dropdown-container"},n.createElement(l.PopoverTrigger,{onDragOver:this.onDragEnter,onMouseEnter:this.onMouseEnter},n.createElement("button",{className:"u-unbutton breadcrumb-overflow-button u-l-fl"},g)),n.createElement(l.PopoverContent,{isRevealed:this.state.menuVisible,onDragEnter:this.onInnerDragEnter,onDragLeave:this.onDragLeave},t.map(function(t){return n.createElement(v,{key:encodeURI(t.path),path:t.path,icon:t.icon,alt:t.alt,folderName:t.folderName,currentPath:o,isHighlightedDropTarget:s,isDraggingInternalFiles:c,setFileUploaderPath:u,closeFunc:e.onClose,disableDragging:h})})),n.createElement(i.IconArrow,{name:_,className:"breadcrumb__spacer"}))},t.defaultProps={shouldHighlightDropTargets:!1,isDraggingInternalFiles:!1,disableDragging:!1},t})(n.Component)}),define("modules/clean/react/selection",["require","exports","tslib","external/immutable"],function(e,t,r,o){"use strict";function n(e,t){return new i({selected:e?o.OrderedSet(e):o.OrderedSet(),anchor:t||(e?e[0]:null)})}Object.defineProperty(t,"__esModule",{value:!0});var i=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t})(o.Record({selected:null,anchor:null},"Selection"));t.Selection=i,t.createSelection=n}),define("modules/clean/sharing/browse_exports",["require","exports","tslib","modules/core/browser","modules/clean/sharing/gating_util","modules/clean/sharing/async_share_modal_util","modules/clean/sharing/public_folder/public_folder","modules/clean/sharing/wizard/async_wizard_modals"],function(e,t,r,o,n,i,a,l){"use strict";function s(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];e(["modules/clean/sharing/shared_content_link_mount_folder"],function(e){e.mountSharedFolder.apply(void 0,t)})}function c(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];return r.__awaiter(this,void 0,void 0,function(){return r.__generator(this,function(r){return[2,new Promise(function(r,o){e(["modules/clean/sharing/ui_util"],function(e){r(e.genContentManagerBridgeUri.apply(void 0,t))},o)})]})})}function d(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.__awaiter(this,void 0,void 0,function(){var t;return r.__generator(this,function(r){switch(r.label){case 0:return[4,c.apply(void 0,e)];case 1:return t=r.sent(),o.open_tab(t.toString()),[2]}})})}function u(t,r,o,n,i,a,l){e(["modules/clean/sharing/cdm_new_folder_modal"],function(e){e.showCdmNewFolderModal(t,r,o,n,i,a,l)})}function p(t){return r.__awaiter(this,void 0,void 0,function(){var o;return r.__generator(this,function(r){switch(r.label){case 0:return[4,new Promise(function(t,r){e(["modules/clean/sharing/cdm_new_folder_modal_util"],t,r)})];case 1:return o=r.sent(),o.showAppropriateNewFolderModalForCdmUser(t),[2]}})})}Object.defineProperty(t,"__esModule",{value:!0}),t.asyncMountSharedFolder=s,t.asyncGoToContentManagerForPath=d,t.asyncShowCdmNewFolderModal=u,t.asyncShowAppropriateNewFolderModalForCdmUser=p,t.GoldenGate=n.GoldenGate,t.asyncShowShareModal=i.asyncShowShareModal,t.asyncShowNewFolderShareModal=i.asyncShowNewFolderShareModal,t.asyncShowPrefilledShareModal=i.asyncShowPrefilledShareModal,t.asyncShowSharedContentLinkSyncModal=i.asyncShowSharedContentLinkSyncModal,t.makePublicFolderLink=a.makePublicFolderLink,t.shouldUsePublicFolderSharing=a.shouldUsePublicFolderSharing,t.showPublicFolderLinkModal=a.showPublicFolderLinkModal,t.asyncShowShareAFolderWizardModal=l.asyncShowShareAFolderWizardModal}),define("modules/clean/sharing/gating_util",["require","exports","modules/constants/sharing"],function(e,t,r){"use strict";function o(e){return r.TRUELINK.NO_COMMENT_ENABLED&&!!(null!=e?r.TRUELINK.NO_COMMENT_ENABLED[e.id]:void 0)}Object.defineProperty(t,"__esModule",{value:!0}),t.GoldenGate={hasNewOwnershipModel:function(e){return Boolean(r.GOLDEN_GATE.HAS_NEW_OWNERSHIP_MODEL[e])},hasContentManagerAndSuperAdmin:function(e){return Boolean(r.GOLDEN_GATE.HAS_CONTENT_MANAGER_AND_SUPER_ADMIN[e])},hasContentManagerCdm:function(e){return Boolean(r.GOLDEN_GATE.HAS_CONTENT_MANAGER_CDM[e])},hasContentManagerFolderRestore:function(e){return Boolean(r.GOLDEN_GATE.CAN_RESTORE_FOLDERS_IN_CM[e])},SHARING_TOTAL_LIMIT:r.GOLDEN_GATE.SHARING_TOTAL_LIMIT},t.isUserNoCommentEnabled=o}),define("modules/clean/sharing/public_folder/public_folder",["require","exports","modules/core/uri","modules/constants/public_folder_constants"],function(e,t,r,o){"use strict";function n(e,t){if(e.publicAppToken)return t;if(!e.isPublicFolderEnabled)return null;var r=(e.publicFolderFqPath||"/public").toLowerCase(),o=t.toLowerCase();return o===r?"/":o.startsWith(r+"/")?t.substring(r.length):null}function i(e,t){return null!=n(e,t)}function a(e,t,i,a){if(a)return null;var l,s=n(t,i)
;if(l=o.SHOULD_REDIRECT_URL?"u"+e+".dl.dropboxusercontent.com":"dl.dropboxusercontent.com",null!=s){var c=new r.URI({scheme:"https",authority:l});return t.publicAppToken?(c.setPath("/spa/"+t.publicAppToken+s+"/data"),c.toString()):(c.setPath("/u/"+e+s),c.toString())}return null}function l(t){return new Promise(function(r,o){e(["external/react","modules/clean/react/modal","modules/clean/sharing/public_folder/modal"],function(e,o,n){var i=o.Modal,a=n.CopyPublicLinkModal;i.showInstance(e.createElement(a,{publicLink:t})),r()})})}Object.defineProperty(t,"__esModule",{value:!0}),t.shouldUsePublicFolderSharing=i,t.makePublicFolderLink=a,t.showPublicFolderLinkModal=l});
//# sourceMappingURL=pkg-browse-and-photos.min.js-vflY0m_S5.map