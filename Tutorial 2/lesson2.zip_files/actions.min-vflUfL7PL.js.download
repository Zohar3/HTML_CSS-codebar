define(["require","exports","tslib","modules/clean/react/comments2/store/api","modules/clean/api_v2/error","modules/clean/api_v2/types","modules/clean/react/file_sidebar/store/sidebar/types","modules/clean/react/file_sidebar/store/sidebar/actions","modules/clean/react/file_sidebar/store/instance","modules/clean/react/comments2/store/types","modules/clean/react/comments2/bolt_client/comments2_bolt_client","modules/clean/react/comments2/helper","modules/clean/react/comments2/logger"],function(e,t,n,r,o,a,i,s,c,u,d,m,l){"use strict";function p(){return{type:u.ActionType.ListCommentsRequest,payload:{}}}function g(){return{type:u.ActionType.ListCommentsError,payload:{}}}function y(e,t,n){return{type:u.ActionType.ListCommentsSuccess,payload:{threads:e,authors:t,shouldExpandThreadFromUrl:n}}}function h(e,t,n,r,o){return{type:u.ActionType.AddCommentRequest,payload:{author:e,content:t,annotation:r,threadId:o,guid:n}}}function f(e){return{type:u.ActionType.AddCommentError,payload:{guid:e}}}function A(e,t){return{type:u.ActionType.AddCommentSuccess,payload:{id:e,guid:t}}}function T(e,t){return{type:u.ActionType.EditCommentRequest,payload:{commentId:e,content:t}}}function C(e,t){return{type:u.ActionType.EditCommentError,payload:{commentId:e,error:t}}}function k(e){return{type:u.ActionType.EditCommentSuccess,payload:{commentId:e}}}function v(e){return{type:u.ActionType.ActivateThread,payload:{thread:e}}}function R(){return{type:u.ActionType.MarkThreadReadRequest,payload:{}}}function S(){return{type:u.ActionType.MarkThreadReadError,payload:{}}}function _(e){return{type:u.ActionType.MarkThreadReadSuccess,payload:{threadId:e}}}function b(){return{type:u.ActionType.MarkThreadUnreadRequest,payload:{}}}function I(){return{type:u.ActionType.MarkThreadUnreadError,payload:{}}}function F(e){return{type:u.ActionType.MarkThreadUnreadSuccess,payload:{threadId:e}}}function E(e){return{type:u.ActionType.MarkThreadResolvedRequest,payload:{threadId:e}}}function U(e,t){return{type:u.ActionType.MarkThreadResolvedError,payload:{threadId:e,error:t}}}function q(e){return{type:u.ActionType.MarkThreadResolvedSuccess,payload:{threadId:e}}}function M(){return{type:u.ActionType.MarkThreadUnresolvedRequest,payload:{}}}function O(){return{type:u.ActionType.MarkThreadUnresolvedError,payload:{}}}function w(e){return{type:u.ActionType.MarkThreadUnresolvedSuccess,payload:{threadId:e}}}function D(){return{type:u.ActionType.ToggleShowResolved,payload:{}}}function H(e){return{type:u.ActionType.DeleteCommentRequest,payload:{commentId:e}}}function L(e,t){return{type:u.ActionType.DeleteCommentError,payload:{commentId:e,error:t}}}function P(e){return{type:u.ActionType.DeleteCommentSuccess,payload:{commentId:e}}}function B(e){return{type:u.ActionType.UpdatePlayerCurrentTime,payload:{currentTime:e}}}function W(){return{type:u.ActionType.CheckOnboardingStatusRequest,payload:{}}}function x(){return{type:u.ActionType.CheckOnboardingStatusError,payload:{}}}function z(e){return{type:u.ActionType.CheckOnboardingStatusSuccess,payload:{onboardingResult:e}}}function K(){return{type:u.ActionType.MarkHasOnboardedRequest,payload:{}}}function j(e){return{type:u.ActionType.MarkHasOnboardedSuccess,payload:{onboardingKey:e}}}function V(){return{type:u.ActionType.MarkHasOnboardedError,payload:{}}}function G(e,t){return Q(e,t,!0,function(n,r,o){new ce(e,t,n).startLiveUpdate(t.id,o)})}function J(e){return{type:u.ActionType.InitializeMentionsContacts,payload:{user:e}}}function N(e,t){return{type:u.ActionType.MentionsMatchesUpdate,payload:{query:e,matchingContacts:t}}}function Q(e,t,u,d){var m=this;return function(h){return n.__awaiter(m,void 0,void 0,function(){var m,f,A,T,C,k,v,R,S;return n.__generator(this,function(n){switch(n.label){case 0:h(p()),m=e?new r.Comments2Api(e.id):new r.Comments2LoggedOutApi,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,m.listComments(t)];case 2:return f=n.sent(),A=f.threads,T=f.bolt_info,C=f.users,k=f.status,v=a.Union.parse(k).type,"enabled"===v||"readonly"===v?(h(y(A,C,u)),c.store.dispatch(s.setComments2FetchStatus({status:i.PermissionStatus.RECEIVED})),T&&d(h,t.id,T)):"comments1"===v?c.store.dispatch(s.setComments2FetchStatus({status:i.PermissionStatus.DISABLED})):h(g()),[3,4];case 3:return R=n.sent(),R instanceof o.ApiError&&(S=R,S.error&&"file_not_found"===S.error[".tag"]?c.store.dispatch(s.setComments2FetchStatus({status:i.PermissionStatus.DISABLED})):e&&l.commentLogger.logEvent(e.id,"comment_error",t)),h(g()),[3,4];case 4:return[2]}})})}}function X(e){var t=e.user,n=e.author,r=e.stream,o=e.comment,a=e.content,i=e.annotation,s=e.threadId,c=e.guid;return se({userId:t.id,startAction:function(){return h(n,a,c,i,s)},clientFn:function(e){return e.addComment(r,o,s)},successAction:function(e){return A(e.id,c)},errorAction:function(e){return f(c)},loggingFn:m.Comments2Helper.getLoggingFnWithCommentAcknowledgementResult,loggingData:{event:s?"reply_to_comment":"new_comment",stream:r,threadId:s}})}function Y(e,t){return se({userId:e.id,startAction:K,clientFn:function(e){return e.markHasOnboarded(t)},successAction:function(e){return j(t)},errorAction:function(e){return V()},loggingFn:null,loggingData:null})}function Z(e,t,n){return se({userId:e.id,startAction:function(){return H(n)},clientFn:function(e){return e.deleteComment(t,n)},successAction:function(e){return P(n)},errorAction:function(e){return L(n,e)},loggingFn:m.Comments2Helper.getLoggingFnWithCommentAcknowledgementResult,loggingData:{event:"delete_comment",stream:t,commentId:n}})}function $(e,t,n,r){var o=m.Comments2Helper.commentContentToUserSubmittedComment(r,t);return se({userId:e.id,startAction:function(){return T(n,r)},clientFn:function(e){return e.editComment(t,n,o)},successAction:function(e){return k(n)},errorAction:function(e){return C(n,e)},loggingFn:m.Comments2Helper.getLoggingFnWithCommentAcknowledgementResult,loggingData:{event:"edit_comment",stream:t,commentId:n}})}function ee(e,t,n,r){return se({userId:e.id,startAction:R,clientFn:function(e){return e.markThreadRead(t,n)},successAction:function(e){return _(e.id)},errorAction:function(e){return S()},loggingFn:m.Comments2Helper.getLoggingFnWithThreadAcknowledgementResult,loggingData:{event:r===u.MarkThreadReadOrigin.ThreadActivated?"read_thread":"mark_thread_as_read",stream:t,threadId:n}})}function te(e,t,n){return se({userId:e.id,startAction:b,clientFn:function(e){return e.markThreadUnread(t,n)},successAction:function(e){return F(e.id)},errorAction:function(e){return I()},loggingFn:m.Comments2Helper.getLoggingFnWithThreadAcknowledgementResult,loggingData:{event:"mark_thread_as_unread",stream:t,threadId:n}})}function ne(e,t,n){return se({userId:e.id,startAction:function(){return E(n)},clientFn:function(e){return e.markThreadResolved(t,n)},successAction:function(e){return q(e.id)},errorAction:function(e){return U(n,e)},loggingFn:m.Comments2Helper.getLoggingFnWithThreadAcknowledgementResult,loggingData:{event:"resolve_thread",stream:t,threadId:n}})}function re(e,t,n){return se({userId:e.id,startAction:M,clientFn:function(e){return e.markThreadUnresolved(t,n)},successAction:function(e){return w(e.id)},errorAction:function(e){return O()},loggingFn:m.Comments2Helper.getLoggingFnWithThreadAcknowledgementResult,loggingData:{event:"unresolve_thread",stream:t,threadId:n}})}function oe(e){return se({userId:e,startAction:W,clientFn:function(e){return e.checkOnboardingStatus()},successAction:function(e){return z(e)},errorAction:function(e){return x()},loggingFn:null,loggingData:null})}function ae(e){var t=this,r={type:u.ActionType.SuppressOnboardingForSession,payload:{onboardingKey:e}};return function(e){return n.__awaiter(t,void 0,void 0,function(){return n.__generator(this,function(t){return e(r),[2]})})}}function ie(e){return{type:u.ActionType.RecordPausePlay,payload:{isPaused:e}}}function se(e){var t=this,o=e.userId,a=e.startAction,i=e.successAction,s=e.clientFn,c=e.errorAction,u=e.loggingFn,d=e.loggingData;return function(e){return n.__awaiter(t,void 0,void 0,function(){var t,l,p;return n.__generator(this,function(n){switch(n.label){case 0:e(a()),t=new r.Comments2Api(o),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,s(t)];case 2:return l=n.sent(),e(i(l)),u&&d&&u(o,d,l),[3,4];case 3:return p=n.sent(),e(c(p)),d&&m.Comments2Helper.logCommentError(o,d),[3,4];case 4:return[2]}})})}}Object.defineProperty(t,"__esModule",{value:!0}),t.listCommentsRequest=p,t.listCommentsError=g,t.listCommentsSuccess=y,t.addCommentRequest=h,t.addCommentError=f,t.addCommentSuccess=A,t.editCommentRequest=T,t.editCommentError=C,t.editCommentSuccess=k,t.activateThread=v,t.markThreadReadRequest=R,t.markThreadReadError=S,t.markThreadReadSuccess=_,t.markThreadUnreadRequest=b,t.markThreadUnreadError=I,t.markThreadUnreadSuccess=F,t.markThreadResolvedRequest=E,t.markThreadResolvedError=U,t.markThreadResolvedSuccess=q,t.markThreadUnresolvedRequest=M,t.markThreadUnresolvedError=O,t.markThreadUnresolvedSuccess=w,t.toggleShowResolved=D,t.deleteCommentRequest=H,t.deleteCommentError=L,t.deleteCommentSuccess=P,t.updatePlayerCurrentTime=B,t.checkOnboardingStatusRequest=W,t.checkOnboardingStatusError=x,t.checkOnboardingStatusSuccess=z,t.markHasOnboardedRequest=K,t.markHasOnboardedSuccess=j,t.markHasOnboardedError=V,t.listComments=G,t.initializeMentionsContacts=J,t.mentionsMatchesUpdate=N,t.addComment=X,t.markOnboarded=Y,t.deleteComment=Z,t.editComment=$,t.markThreadRead=ee,t.markThreadUnread=te,t.markThreadResolved=ne,t.markThreadUnresolved=re,t.checkOnboardingStatus=oe,t.suppressOnboardingForSession=ae,t.recordPausePlay=ie;var ce=(function(e){function t(t,n,r){var o=e.call(this)||this;return o.user=t,o.stream=n,o.dispatch=r,o.onBoltRefresh=function(){o.dispatch(Q(o.user,o.stream,!1,function(e,t,n){o.resetLiveUpdate(t,n)}))},o}return n.__extends(t,e),t.prototype.onBoltUpdateImpl=function(){var e=this;this.dispatch(Q(this.user,this.stream,!1,function(t,n,r){e.updateBoltState(n,r)}))},t})(d.BaseComments2BoltClient);t.ActionsComments2BoltClient=ce});
//# sourceMappingURL=actions.min.js-vflOotMc-.map